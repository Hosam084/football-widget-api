here<!doctype html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box
        }

        body {
            font-family: 'Cairo', 'Segoe UI', sans-serif;
            padding: 20px
        }

        @media (prefers-color-scheme: dark) {
            body {
                background: #121212;
                color: #e0e0e0
            }

            .date-filter, .league-filter, .match-card {
                background: #1e1e1e;
                color: #e0e0e0
            }

            .league-filter {
                border: 1px solid #333
            }

            .skeleton-line {
                background: #333
            }
        }

        @media (prefers-color-scheme: light) {
            body {
                background: #f5f5f5;
                color: #222
            }

            .date-filter, .league-filter, .match-card {
                background: #fff;
                color: #222
            }

            .league-filter {
                border: 1px solid #ccc
            }

            .skeleton-line {
                background: #ddd
            }
        }

        .matches-widget {
            max-width: 800px;
            margin: 0 auto
        }

        .date-filter {
            display: flex;
            border-radius: 8px;
            padding: 6px;
            margin-bottom: 20px;
            gap: 6px;
            overflow-x: auto
        }

        .date-filter button {
            flex: 1;
            background: 0 0;
            border: none;
            color: inherit;
            padding: 12px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 700;
            border-radius: 6px;
            transition: .3s;
            white-space: nowrap
        }

        .date-filter button.active {
            background: #FFA726;
            color: #121212
        }

        .league-filter {
            max-width: 200px;
            margin: 0 0 20px auto;
            display: block;
            width: 100%;
            padding: 8px;
            border-radius: 6px
        }

        .matches-container {
            display: flex;
            flex-direction: column;
            gap: 12px
        }

        .match-card {
            border-radius: 12px;
            padding: 15px;
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            grid-template-areas: "header header header" "team1 center team2";
            align-items: center;
            gap: 12px;
            transition: .2s
        }

        .match-card:hover {
            transform: translateY(-2px)
        }

        .match-header {
            grid-area: header;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #333;
            padding-bottom: 8px;
            margin-bottom: 8px
        }

        .league-name {
            font-size: 12px;
            font-weight: 700
        }

        .team {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 6px;
            text-align: center
        }

        .team.home {
            grid-area: team1
        }

        .team.away {
            grid-area: team2
        }

        .team-name {
            font-size: 14px;
            font-weight: 700
        }

        .team-logo {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            object-fit: cover;
            background: #333;
            padding: 2px
        }

        .match-center {
            grid-area: center;
            text-align: center
        }

        .score {
            font-size: 22px;
            font-weight: 700;
            margin: 5px 0
        }

        .center-time {
            font-size: 18px;
            font-weight: 700;
            margin: 5px 0
        }

        .status {
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 700
        }

        .status-live {
            background: #d32f2f;
            color: #fff
        }

        .status-finished {
            background: #424242;
            color: #bdbdbd
        }

        .status-upcoming {
            background: #388e3c;
            color: #fff
        }

        .load-more, .load-less {
            background: #FFA726;
            color: #121212;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 700;
            cursor: pointer;
            margin: 10px auto;
            display: block
        }

        .loading {
            text-align: center;
            padding: 40px;
            font-size: 16px
        }

        .error {
            text-align: center;
            padding: 30px;
            color: #e74c3c;
            background: #2c1e1e;
            border-radius: 8px;
            margin: 10px 0
        }

        .skeleton {
            opacity: .7;
            animation: pulse 1.5s infinite
        }

        @keyframes pulse {
            0%, 100% {
                opacity: .7
            }
            50% {
                opacity: .9
            }
        }

        .skeleton-line {
            border-radius: 4px;
            margin: 4px 0
        }

        @media (max-width: 480px) {
            .team-name {
                font-size: 12px
            }

            .score {
                font-size: 18px
            }

            .team-logo {
                width: 35px;
                height: 35px
            }

            .center-time {
                font-size: 16px
            }
        }
    </style>
</head>
<body>
    <div class="matches-widget">
        <div class="date-filter">
            <button data-day="yesterday">Ø£Ù…Ø³</button>
            <button class="active" data-day="today">Ø§Ù„ÙŠÙˆÙ…</button>
            <button data-day="tomorrow">ØºØ¯Ø§Ù‹</button>
        </div>
        <select id="leagueFilter" class="league-filter">
            <option value="all">ÙƒÙ„ Ø§Ù„Ø¯ÙˆØ±ÙŠØ§Øª</option>
        </select>
        <div class="matches-container" id="matchesContainer"></div>
    </div>
    
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const c = document.getElementById("matchesContainer"),
                d = document.querySelector(".date-filter"),
                f = document.getElementById("leagueFilter");
            
            let g = "today",
                a = []; // 'a' Ù‡Ùˆ Ø§Ù„Ù…ØªØºÙŠØ± Ø§Ù„Ø°ÙŠ ÙŠØ­Ù…Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¨Ø§Ø±ÙŠØ§Øª

            // Ø¯Ø§Ù„Ø© ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¯ÙˆØ±ÙŠØ§Øª (Ù„Ø§ ØªØ­ØªØ§Ø¬ ØªØ¹Ø¯ÙŠÙ„)
            function p(m) {
                const l = [...new Set(m.map(i => i.league).filter(l => l && l.trim() !== ''))];
                f.innerHTML = '<option value="all">ÙƒÙ„ Ø§Ù„Ø¯ÙˆØ±ÙŠØ§Øª</option>';
                l.forEach(l => {
                    const opt = document.createElement("option");
                    opt.value = l;
                    opt.textContent = l;
                    f.appendChild(opt)
                })
            }
            
            // Ù…Ø³ØªÙ…Ø¹ÙŠ Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ù„Ù„ÙÙ„Ø§ØªØ± (Ù„Ø§ ØªØ­ØªØ§Ø¬ ØªØ¹Ø¯ÙŠÙ„)
            d.addEventListener("click", function (e) {
                if (e.target.tagName === "BUTTON") {
                    document.querySelectorAll(".date-filter button").forEach(b => b.classList.remove("active"));
                    e.target.classList.add("active");
                    g = e.target.dataset.day;
                    h()
                }
            });
            f.addEventListener("change", () => h());

            // Ø¯Ø§Ù„Ø© ÙÙ„ØªØ±Ø© ÙˆØ¹Ø±Ø¶ Ø§Ù„Ù…Ø¨Ø§Ø±ÙŠØ§Øª (Ù„Ø§ ØªØ­ØªØ§Ø¬ ØªØ¹Ø¯ÙŠÙ„)
            function h() {
                if (a.length === 0) {
                    c.innerHTML = '<div class="loading">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø¨Ø§Ø±ÙŠØ§Øª...</div>';
                    return
                }
                const today = new Date();
                today.setHours(0, 0, 0, 0);
                let filtered = a.filter(m => {
                    const md = new Date(m.date);
                    if (isNaN(md)) return !1;
                    md.setHours(0, 0, 0, 0);
                    const diff = Math.round((md - today) / (1e3 * 60 * 60 * 24));
                    if (g === "today") return diff === 0;
                    if (g === "yesterday") return diff === -1;
                    if (g === "tomorrow") return diff === 1;
                    return !1
                });
                if (f.value !== "all") filtered = filtered.filter(m => m.league === f.value);
                if (filtered.length === 0) {
                    c.innerHTML = '<div class="loading">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¨Ø§Ø±ÙŠØ§Øª</div>';
                    return
                }
                const sorted = filtered.sort((a, b) => new Date(a.date) - new Date(b.date));
                L(sorted)
            }
            
            // Ø¯Ø§Ù„Ø© Ø¥Ù†Ø´Ø§Ø¡ ÙˆØ¹Ø±Ø¶ Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ù…Ø¨Ø§Ø±ÙŠØ§Øª (ØªÙ… Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ù„ØªØ¶Ù…ÙŠÙ† id ÙØ±ÙŠØ¯)
            function L(m) {
                c.innerHTML = "";
                m.forEach(m => {
                    const card = document.createElement("div");
                    
                    // ********** Ø¥Ø¶Ø§ÙØ© ID ÙØ±ÙŠØ¯ Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø© **********
                    // Ù‡Ø°Ø§ Ø¶Ø±ÙˆØ±ÙŠ Ù„Ø¯Ø§Ù„Ø© Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¨Ø§Ø´Ø±
                    card.id = `match-${m.matchId}`; 
                    
                    card.className = "match-card";
                    const md = new Date(m.date),
                        timeString = md.toLocaleTimeString("ar-EG", {
                            hour: "2-digit",
                            minute: "2-digit"
                        });
                    let statusClass, statusText, centerContent;
                    const status = (m.status || "").trim().toLowerCase();
                    if (status.includes("Ù…Ø¨Ø§Ø´Ø±")) {
                        statusClass = "status-live";
                        statusText = "Ù…Ø¨Ø§Ø´Ø±";
                        // ********** Ø¥Ø¶Ø§ÙØ© ID Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙˆØ§Ù„Ø­Ø§Ù„Ø© **********
                        centerContent = `<div class="score" id="score-${m.matchId}">${m.scoreHome||"0"} - ${m.scoreAway||"0"}</div>`
                    } else if (status.includes("Ø§Ù†ØªÙ‡Øª") || status.includes("finished") || status.includes("ft")) {
                        statusClass = "status-finished";
                        statusText = "Ø§Ù†ØªÙ‡Øª";
                        // ********** Ø¥Ø¶Ø§ÙØ© ID Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙˆØ§Ù„Ø­Ø§Ù„Ø© **********
                        centerContent = `<div class="score" id="score-${m.matchId}">${m.scoreHome||"0"} - ${m.scoreAway||"0"}</div>`
                    } else {
                        statusClass = "status-upcoming";
                        statusText = "Ù„Ù… ØªØ¨Ø¯Ø£";
                        centerContent = `<div class="center-time">${timeString}</div>`
                    }
                    card.innerHTML = `<div class="match-header"><span class="league-name">${m.league}</span></div><div class="team home">${m.homeLogo?`<img src="${m.homeLogo}" class="team-logo">`:``}<span class="team-name">${m.homeTeam}</span></div><div class="match-center"><div class="status ${statusClass}" id="status-${m.matchId}">${statusText}</div>${centerContent}</div><div class="team away">${m.awayLogo?`<img src="${m.awayLogo}" class="team-logo">`:``}<span class="team-name">${m.awayTeam}</span></div>`;
                    c.appendChild(card)
                })
            }
            
            // //////////////////////////////////////////////////////
            // ğŸ›‘ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ù„Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¨Ø§Ø´Ø± ÙˆØ§Ù„Ù…Ø¬Ø§Ù†ÙŠ ğŸ›‘
            // //////////////////////////////////////////////////////
            
            // Ø¯Ø§Ù„Ø© ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ÙÙŠ ØµÙØ­Ø© HTML
            function updateDOMWithMatchData(matches) {
                matches.forEach(match => {
                    const scoreElement = document.getElementById(`score-${match.matchId}`);
                    const statusElement = document.getElementById(`status-${match.matchId}`);

                    // 1. ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø¹Ù†ØµØ± Ù…ÙˆØ¬ÙˆØ¯Ù‹Ø§
                    if (scoreElement) {
                        scoreElement.textContent = `${match.scoreHome} - ${match.scoreAway}`;
                    }
                    
                    // 2. ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø©
                    if (statusElement) {
                         const status = (match.status || "").trim().toLowerCase();
                         let statusClass, statusText;
                         
                         if(status.includes("Ù…Ø¨Ø§Ø´Ø±")) {
                            statusClass = "status-live";
                            statusText = "Ù…Ø¨Ø§Ø´Ø±";
                         } else if (status.includes("Ø§Ù†ØªÙ‡Øª") || status.includes("finished") || status.includes("ft")) {
                            statusClass = "status-finished";
                            statusText = "Ø§Ù†ØªÙ‡Øª";
                         } else {
                            statusClass = "status-upcoming";
                            statusText = "Ù„Ù… ØªØ¨Ø¯Ø£";
                         }
                         
                         statusElement.textContent = statusText;
                         statusElement.className = `status ${statusClass}`;
                    }
                });
            }

            // Ø§Ù„Ø¯Ø§Ù„Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ù„Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† matches.json
            function fetchAndUpdateMatches() {
                // Ù†Ø³ØªØ®Ø¯Ù… Fetch Ù„Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø«Ø§Ø¨Øª (matches.json)
                // Ø¥Ø¶Ø§ÙØ© Ù…ØªØºÙŠØ± Ø¹Ø´ÙˆØ§Ø¦ÙŠ (?t=) Ù„Ø¶Ù…Ø§Ù† Ø¹Ø¯Ù… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…ØªØµÙØ­ Ù„Ù†Ø³Ø®Ø© Ù‚Ø¯ÙŠÙ…Ø© (Cache)
                fetch('/matches.json?t=' + new Date().getTime()) 
                    .then(response => {
                        if (!response.ok) {
                            throw new Error("ÙØ´Ù„ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");
                        }
                        return response.json();
                    })
                    .then(data => {
                        // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù‡ÙŠ Ø£ÙˆÙ„ Ø¬Ù„Ø¨ Ù„Ù„Ù…ÙˆÙ‚Ø¹ØŒ Ù†Ø¹Ø±Ø¶ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª ÙƒØ§Ù…Ù„Ø©
                        if (a.length === 0) {
                             a = data; // ØªØ®Ø²ÙŠÙ† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                             p(a);    // ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¯ÙˆØ±ÙŠØ§Øª
                             h();     // Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø¨Ø§Ø±ÙŠØ§Øª ÙƒØ§Ù…Ù„Ø© (Ø¥Ù†Ø´Ø§Ø¡ Ø¨Ø·Ø§Ù‚Ø§Øª HTML)
                        } else {
                            // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ù…ÙˆØ¬ÙˆØ¯Ø© Ø¨Ø§Ù„ÙØ¹Ù„ØŒ Ù†Ù‚ÙˆÙ… Ø¨ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ÙÙ‚Ø·
                            updateDOMWithMatchData(data);
                            a = data; // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…ØªØºÙŠØ± 'a' Ù„Ù„ÙÙ„ØªØ±Ø© Ø§Ù„Ù„Ø§Ø­Ù‚Ø©
                        }
                    })
                    .catch(error => {
                        console.error("Error during live update:", error);
                        if (a.length === 0) {
                            c.innerHTML = '<div class="error">ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„Ø§Ø­Ù‚Ø§Ù‹.</div>';
                        }
                    });
            }
            
            // 1. ØªØ´ØºÙŠÙ„ ÙÙˆØ±ÙŠ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
            fetchAndUpdateMatches();
            
            // 2. ØªØ´ØºÙŠÙ„ Ù…ØªÙƒØ±Ø± ÙƒÙ„ 30 Ø«Ø§Ù†ÙŠØ© (30000 Ù…Ù„Ù„ÙŠ Ø«Ø§Ù†ÙŠØ©) Ù„Ø¶Ù…Ø§Ù† Ø§Ù„Ø¨Ø« Ø§Ù„Ù…Ø¨Ø§Ø´Ø±
            setInterval(fetchAndUpdateMatches, 30000); 

        });
    </script>
</body>
</html>
